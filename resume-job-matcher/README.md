/\*\*

- @fileoverview 이력서-채용공고 매칭 분석 웹사이트 PRD (Product Requirements Document)
- @description React + TypeScript + Tailwind CSS + shadcn/ui + Magic UI로 구현하는 현대적인 이력서-채용공고 매칭 분석 플랫폼의 상세 요구사항 문서입니다.
-
- @author 개발팀
- @version 1.0.0
- @since 2024
- @license MIT
  \*/

# 이력서-채용공고 매칭 분석 웹사이트 PRD

## 프로젝트 개요

React + TypeScript + Tailwind CSS + shadcn/ui + Magic UI로 구현하는 현대적인 이력서-채용공고 매칭 분석 플랫폼

### 핵심 가치 제안

- AI 기반 정밀한 매칭 분석 (Cohere API + 로컬 알고리즘)
- 전문적인 사용자 경험 (shadcn/ui + Magic UI 애니메이션)
- 완전한 오프라인 지원 (PWA + 로컬 텍스트 분석)
- ATS 최적화 가이드 및 개선 제안

## 기술 스택

### 프론트엔드 프레임워크

- React 18 + TypeScript + Vite
- 스타일링을 위한 테일윈드 CSS
- shadcn/UI 컴포넌트 라이브러리
- 애니메이션 및 시각화를 위한 매직 UI

### 텍스트 분석 엔진

- PDF 구문 분석 및 텍스트 추출을 위한 pdf.js
- TF-IDF 및 텍스트 처리를 위한 natural.js
- 의미 유사성을 위한 Cohere API 분류(월 1000회 요청)
- ATS 준수 검사를 위한 맞춤형 정규 분포 패턴

### 상태 관리 및 스토리지

- 글로벌 상태에 대한 컨텍스트 API 반응
- 사용자 설정 및 API 구성을 위한 로컬 스토리지
- 분석 기록 및 캐시된 결과를 위한 인덱싱된 데이터베이스
- PWA 및 오프라인 기능을 위한 서비스 워커

### 배포 및 성능

- 호스팅 및 배포용 Vercel
- 코드 분할 및 게으른 로딩
- 대량 텍스트 처리를 위한 웹 워커
- 포괄적인 캐싱 전략

## 핵심 기능 요구사항

### 1. PDF 이력서 업로드 시스템

**목표**: 사용자가 PDF 이력서를 쉽게 업로드하고 처리할 수 있는 시스템

**기능 세부사항**:

- 드래그앤드롭 인터페이스 (shadcn/ui 기반)
- 파일 검증 (크기, 형식, 내용)
- PDF 텍스트 추출 (pdf.js 통합)
- 실시간 업로드 진행률 (Magic UI 애니메이션)
- 파일 미리보기 및 재업로드 기능
- 다국어 텍스트 지원 (한국어/영어)

**기술 요구사항**:

- TypeScript 인터페이스로 완전한 타입 안전성
- 모바일 친화적 반응형 디자인
- WCAG 접근성 표준 준수
- Web Worker를 통한 비동기 처리

### 2. 채용공고 텍스트 입력 시스템

**목표**: 채용공고 내용을 효율적으로 입력하고 전처리할 수 있는 시스템

**기능 세부사항**:

- 멀티라인 텍스트 에디터 (shadcn/ui Textarea)
- 실시간 글자수 카운터 및 키워드 하이라이팅
- 채용공고 템플릿 제공
- 자동 저장 기능 (sessionStorage)
- 텍스트 형식 검증 및 전처리

**기술 요구사항**:

- 실시간 텍스트 분석 및 피드백
- 한국어/영어 텍스트 처리 지원
- 성능 최적화 (디바운싱, 메모이제이션)

### 3. 텍스트 분석 엔진

**목표**: 정확하고 신뢰할 수 있는 텍스트 매칭 분석 시스템

**알고리즘 계층**:

1. **Primary**: Cohere Classify API (의미론적 유사도)
2. **Secondary**: Local TF-IDF + Cosine Similarity (natural.js)
3. **Fallback**: 기본 키워드 매칭 (정규식 기반)
4. **Mock**: 샘플 분석 데이터 (개발/테스트용)

**분석 기능**:

- 키워드 매칭 및 중요도 계산
- 스킬셋 추출 및 분류
- 경험 수준 평가
- ATS 호환성 검사

**성능 요구사항**:

- 할당량 관리 및 사용량 추적
- 지능형 캐싱으로 중복 분석 방지
- 오류 복구 및 폴백 전략
- 대용량 문서 처리 최적화

### 4. 분석 결과 시각화

**목표**: 분석 결과를 직관적이고 매력적으로 표현

**시각화 구성요소**:

- 전체 매칭 점수 (Magic UI AnimatedScoreRing)
- 키워드 매칭 상세 분석 (인터랙티브 워드클라우드)
- 스킬 비교 매트릭스 (FloatingCards)
- ATS 호환성 체크리스트 (shadcn/ui Alert 컴포넌트)
- 개선 제안 사항 (우선순위별 정리)

**사용자 경험**:

- 부드러운 애니메이션 전환
- 상세 정보 툴팁 제공
- 모바일 최적화 레이아웃
- 인쇄 친화적 포맷
- 결과 내보내기 기능 (PDF, JSON)

### 5. API 서비스 관리 시스템

**목표**: 여러 API 모드를 지능적으로 관리하고 사용자에게 투명한 경험 제공

**API 모드**:

- **Mock**: 개발 및 데모용 샘플 데이터
- **Free**: 제한된 무료 서비스 (Cohere API)
- **Offline**: 완전한 로컬 분석 (natural.js 기반)
- **Custom**: 사용자 API 키 사용

**관리 기능**:

- 실시간 API 상태 모니터링
- 할당량 사용량 추적 및 알림
- 자동 폴백 시스템
- API 키 보안 관리
- 사용 통계 및 분석

### 6. PWA 및 오프라인 지원

**목표**: 인터넷 연결 없이도 완전한 분석 기능 제공

**PWA 기능**:

- Service Worker로 오프라인 캐싱
- 앱 설치 프롬프트
- 백그라운드 동기화
- 푸시 알림 (선택사항)

**오프라인 분석**:

- 로컬 TF-IDF 계산
- IndexedDB 기반 데이터 저장
- 오프라인 큐 관리
- 네트워크 복구 시 자동 동기화

### 7. 사용자 설정 및 개인화

**목표**: 사용자별 맞춤 분석 환경 제공

**설정 옵션**:

- API 키 관리 (암호화 저장)
- 분석 깊이 조정 (기본/표준/상세)
- 언어 설정 (한국어/영어)
- 테마 선택 (라이트/다크)
- 개인정보 관리

**개인화 기능**:

- 분석 기록 관리
- 자주 사용하는 키워드 패턴
- 개인별 ATS 설정
- 분석 결과 비교 기능

## 사용자 인터페이스 요구사항

### 디자인 시스템

- **Primary**: Professional blue (#3b82f6) - 신뢰성 표현
- **Success**: Match green (#22c55e) - 매칭 성공 표시
- **Warning**: Improvement orange (#f59e0b) - 개선 필요 영역
- **Danger**: Missing red (#ef4444) - 누락 요소

### 반응형 디자인

- 모바일 우선 설계 (320px+)
- 태블릿 최적화 (768px+)
- 데스크톱 전체 기능 (1024px+)
- 고해상도 디스플레이 지원

### 접근성

- WCAG 2.1 AA 표준 준수
- 키보드 네비게이션 완전 지원
- 스크린 리더 호환성
- 색상 대비 최적화
- 포커스 관리 시스템

## 성능 요구사항

### 로딩 성능

- 초기 로드: 3초 이내 (3G 네트워크)
- PDF 처리: 10MB 파일 기준 5초 이내
- 분석 완료: 평균 3-7초 (모드별)
- 결과 표시: 1초 이내 부드러운 전환

### 번들 최적화

- 초기 번들: 500KB 미만
- 총 에셋: 2MB 미만
- 코드 스플리팅으로 필요시 로딩
- 트리 쉐이킹으로 불필요 코드 제거

### 메모리 관리

- 메모리 사용량: 모바일 100MB, 데스크톱 500MB 미만
- 가비지 컬렉션 최적화
- 대용량 파일 스트리밍 처리
- 메모리 누수 방지

## 보안 및 개인정보

### 데이터 보안

- API 키 암호화 저장
- 이력서 텍스트 로컬 처리 우선
- HTTPS 통신 강제
- CSP (Content Security Policy) 적용

### 개인정보 보호

- 사용자 데이터 최소 수집
- 로컬 스토리지 중심 설계
- GDPR 준수 데이터 관리
- 사용자 제어 데이터 삭제

## 테스트 요구사항

### E2E 테스트 (Playwright)

- 전체 분석 워크플로우 테스트
- 다양한 PDF 형식 업로드 테스트
- API 통합 및 폴백 테스트
- 크로스 브라우저 호환성 테스트
- 모바일 반응형 테스트

### 유닛 테스트

- 텍스트 분석 알고리즘 정확성
- 컴포넌트 렌더링 및 상호작용
- API 서비스 로직 검증
- 유틸리티 함수 테스트

### 접근성 테스트

- 자동화된 접근성 검사
- 스크린 리더 테스트
- 키보드 네비게이션 검증
- 색상 대비 확인

## 배포 및 운영

### 배포 전략

- Vercel 자동 배포 파이프라인
- 환경별 설정 관리 (dev/staging/prod)
- 성능 모니터링 및 알림
- 에러 추적 시스템

### 모니터링

- 실시간 성능 메트릭
- 사용자 행동 분석
- API 사용량 추적
- 에러율 모니터링

## 확장성 고려사항

### 향후 기능 확장

- 다중 파일 배치 분석
- 이력서 최적화 제안 도구
- 업계별 특화 분석
- 실시간 협업 기능

### 기술적 확장성

- 마이크로프론트엔드 아키텍처 준비
- API 서버 분리 가능한 설계
- 다국어 지원 확장
- AI 모델 업그레이드 지원

## 성공 지표

### 사용자 경험 지표

- 분석 완료율: 90% 이상
- 사용자 만족도: 4.5/5.0 이상
- 평균 세션 시간: 10분 이상
- 재방문율: 60% 이상

### 기술적 지표

- 페이지 로드 속도: 3초 이내
- API 성공률: 99% 이상
- 모바일 사용성 점수: 95 이상
- 접근성 점수: AA 등급

## 개발 로그 및 트러블슈팅

### 2025-08-25 개발 세션

#### 🔧 주요 개선 사항

##### 1. UI/UX 개선

- **Navigation 시스템 구축**: 모든 페이지에 통합된 네비게이션 컴포넌트 추가
- **텍스트 레이아웃 최적화**:
  - 긴 텍스트의 줄바꿈 문제 해결 (`<br />` 태그 추가)
  - 컨테이너 너비 조정 (`max-w-2xl` → `max-w-3xl`)
- **버튼 가시성 개선**: `variant="outline"` → `variant="secondary"`로 변경하여 가독성 향상
- **중복 UI 요소 제거**: 네비게이션 버튼 중복 문제 해결

##### 2. 분석 완료 알림 시스템

- **성공 모달 구현**: 매칭 분석 완료 시 팝업 알림 표시
- **애니메이션 추가**: `animate-scale-in` 효과로 사용자 경험 개선
- **결과 확인 버튼**: 모달에서 바로 결과로 이동 가능

##### 3. 설정 시스템 고도화

###### API 모드 선택 개선

- **미리보기 기능**: 설정 변경을 바로 적용하지 않고 선택 후 확인 단계 추가
- **시각적 피드백**:
  - 현재 모드: "현재" 배지 표시
  - 선택된 모드: "선택됨" 배지 표시
- **설정 적용 버튼**: 명시적인 저장 버튼으로 사용자 의도 명확화

###### 모드 상태 표시 시스템

- **실시간 모드 표시**: 분석 페이지 상단에 현재 API 모드 실시간 표시
- **색상 코딩 시스템**:
  - 개발 모드: 보라색 (`bg-purple-100 text-purple-700`)
  - 오프라인: 회색 (`bg-gray-100 text-gray-700`)
  - 무료 API: 초록색 (`bg-green-100 text-green-700`)
  - 사용자 API: 파란색 (`bg-blue-100 text-blue-700`)
- **중복 표시 제거**: APIStatusIndicator 제거하여 깔끔한 UI 구현

###### 무료 할당량 추적 시스템

- **사용량 시각화**: Progress Bar로 일일/월간 사용량 직관적 표시
- **실시간 통계**:
  - 현재 사용량 / 총 한도 표시
  - 사용률 백분율 계산
  - 마지막 리셋 날짜 표시
- **한도 초과 경고**:
  - 일일/월간 한도 도달 시 주황색 경고 메시지
  - 자동 오프라인 모드 전환 안내
- **localStorage 통합**: 사용량 데이터 영구 저장 및 자동 리셋

#### 🐛 해결된 버그

##### 1. Runtime 오류 수정

```javascript
// 문제: ReferenceError: Brain is not defined at analyzer.tsx:363
// 원인: lucide-react에서 Brain 아이콘 import 누락
// 해결: import 문에 Brain 추가
import { ..., Brain } from 'lucide-react';
```

##### 2. PWA Manifest 오류 해결

```javascript
// 문제: Manifest: Line: 1, column: 1, Syntax error
// 원인: vite.config.ts의 PWA 아이콘 경로 불일치
// 기존: 'icon-192.png', 'icon-512.png'
// 실제: 'pwa-192x192.png', 'pwa-512x512.png'
// 해결: 실제 파일명과 일치하도록 수정
```

##### 3. 버튼 중복 제거

- **설정 팝업**: "취소"와 "닫기" 버튼 중복 → "취소"와 "설정 적용" 버튼으로 정리
- **네비게이션**: 상단 네비게이션 버튼 2개 → 통합된 Navigation 컴포넌트 1개

#### 🚀 성능 최적화

##### 1. 상태 관리 최적화

- **selectedMode 상태**: 설정 변경을 즉시 적용하지 않고 임시 상태로 관리
- **실시간 업데이트**: `updateCurrentMode` 함수로 설정 변경 시 UI 즉시 반영
- **메모리 효율성**: 불필요한 리렌더링 방지

##### 2. 컴포넌트 구조 개선

- **Navigation 컴포넌트 재사용**: 모든 페이지에서 일관된 네비게이션 경험
- **Props 인터페이스 확장**: `currentMode` prop 추가로 유연한 모드 표시

#### 🔍 코드 품질 개선

##### 1. TypeScript 타입 안정성

```typescript
// 타입 정의 강화
interface NavigationProps {
  onSettingsClick?: () => void;
  showAPIStatus?: boolean;
  currentMode?: {
    text: string;
    variant: "default" | "secondary";
    className: string;
  };
}

// UsageStats 타입 import 추가
import {
  freeAIService,
  type APIMode,
  type AIServiceConfig,
  type UsageStats,
} from "@/services/freeAIService";
```

##### 2. 함수형 프로그래밍 패턴

```typescript
// 모드 표시 정보 생성 함수
const getModeDisplay = (mode: APIMode) => {
  switch (mode) {
    case "mock":
      return {
        text: "개발 모드",
        variant: "secondary" as const,
        className: "...",
      };
    // ...
  }
};
```

#### 📱 반응형 및 접근성 개선

##### 1. 시각적 피드백 강화

- **Progress Bar**: 할당량 사용률 시각화
- **색상 코딩**: 모드별 명확한 구분
- **배지 시스템**: 현재/선택 상태 명확한 표시

##### 2. 사용자 경험 개선

- **명시적 확인 단계**: 설정 변경 시 사용자 의도 재확인
- **실시간 피드백**: 모드 변경 시 즉시 UI 반영
- **경고 시스템**: 한도 초과 시 명확한 안내

#### 🧹 코드 정리

##### 1. 불필요한 코드 제거

- **APIStatusIndicator import 제거**: Navigation.tsx에서 미사용 import 정리
- **중복 버튼 제거**: DialogFooter에서 중복된 "닫기" 버튼 제거

##### 2. Import 최적화

```typescript
// 필요한 컴포넌트만 import
import { Progress } from "@/components/ui/progress";
import { useState, useEffect } from "react";
```

### 개발 교훈 및 베스트 프랙티스

#### 1. 점진적 개선 접근법

- 사용자 피드백을 바탕으로 단계적 UI/UX 개선
- 기존 기능을 깨뜨리지 않으면서 새 기능 추가

#### 2. 타입 안전성 우선

- TypeScript 타입 정의를 먼저 작성하고 구현
- 런타임 오류를 컴파일 타임에 미리 방지

#### 3. 사용자 중심 설계

- 명시적 사용자 액션 요구 (설정 적용 버튼)
- 현재 상태를 명확하게 표시 (모드 배지)
- 오류 시 명확한 안내 메시지

#### 4. 성능 우선 개발

- 불필요한 리렌더링 방지
- localStorage 활용한 효율적 상태 관리
- 컴포넌트 재사용을 통한 번들 크기 최적화

### 향후 개선 계획

#### 1. 추가 기능

- [ ] 사용량 통계 차트 시각화
- [ ] 설정 내보내기/가져오기 기능
- [ ] 다중 API 키 관리

#### 2. 성능 최적화

- [ ] 컴포넌트 lazy loading
- [ ] 이미지 최적화
- [ ] 캐시 전략 개선

#### 3. 사용자 경험

- [ ] 키보드 네비게이션 개선
- [ ] 다크 모드 토글
- [ ] 툴팁 및 도움말 시스템
