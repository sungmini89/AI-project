import{S as g,F as l,s as f}from"./index-DgkBk0LM.js";class u{config;constructor(){this.config=this.loadConfig()}loadConfig(){const e=localStorage.getItem(g.SETTINGS),t={mode:"offline",fallbackToOffline:!0,usageTracking:{daily:0,monthly:0,lastReset:new Date}};if(e)try{const i=JSON.parse(e);return{...t,...i.aiSettings}}catch{return t}return t}saveConfig(){const e=JSON.parse(localStorage.getItem(g.SETTINGS)||"{}");e.aiSettings=this.config,localStorage.setItem(g.SETTINGS,JSON.stringify(e))}resetUsageIfNeeded(){const e=new Date,t=new Date(this.config.usageTracking.lastReset);e.getDate()!==t.getDate()&&(this.config.usageTracking.daily=0),e.getMonth()!==t.getMonth()&&(this.config.usageTracking.monthly=0),this.config.usageTracking.lastReset=e,this.saveConfig()}canUseAPI(e){this.resetUsageIfNeeded();const t=l[e],i=this.config.usageTracking;return i.daily<t.daily&&i.monthly<t.monthly}trackUsage(){this.config.usageTracking.daily++,this.config.usageTracking.monthly++,this.saveConfig()}async callHuggingFaceAPI(e){try{return console.warn("Hugging Face 토큰이 설정되지 않았습니다."),null}catch(t){return console.error("Hugging Face API 호출 실패:",t),null}}async callGeminiAPI(e){try{return console.warn("Gemini API 키가 설정되지 않았습니다."),null}catch(t){return console.error("Gemini API 호출 실패:",t),null}}async analyzeTask(e){switch(await f(200),this.config.mode){case"mock":return this.getMockAnalysis();case"free":{let t=await this.callGeminiAPI(e);return!t&&this.config.fallbackToOffline&&(t=await this.callHuggingFaceAPI(e)),t||this.getOfflineAnalysis(e)}case"custom":return this.getOfflineAnalysis(e);case"offline":default:return this.getOfflineAnalysis(e)}}getMockAnalysis(){const e=[{category:"업무",priority:"high"},{category:"개인",priority:"medium"},{category:"건강",priority:"high"},{category:"쇼핑",priority:"low"}];return{...e[Math.floor(Math.random()*e.length)],confidence:.9}}getOfflineAnalysis(e){const t=e.toLowerCase(),i={업무:["회의","미팅","업무","일","프로젝트","보고서","이메일"],건강:["병원","의원","치과","검진","진료","운동","헬스"],쇼핑:["쇼핑","구매","마트","주문","배송"],약속:["약속","만남","모임","식사","커피"],학습:["공부","학습","강의","수업","책","독서"],운동:["운동","헬스","요가","수영","조깅","달리기"]};let o="기타";for(const[s,r]of Object.entries(i))if(r.some(c=>t.includes(c))){o=s;break}const a={urgent:["긴급","급함","당장","즉시","asap"],high:["중요","우선","먼저","빠르게"],low:["나중에","여유","틈날때"]};let n="medium";for(const[s,r]of Object.entries(a))if(r.some(c=>t.includes(c))){n=s;break}return{category:o,priority:n,confidence:.7}}getUsageStatus(){return this.resetUsageIfNeeded(),{mode:this.config.mode,usage:this.config.usageTracking,limits:l}}updateConfig(e){this.config={...this.config,...e},this.saveConfig()}}const d=new u;export{d as aiService};
