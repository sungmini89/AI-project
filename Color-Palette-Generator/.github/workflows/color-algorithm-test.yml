name: ğŸ¨ Color Algorithm Tests

on:
  push:
    branches: [ main, develop ]
    paths:
      - 'src/algorithms/**'
      - 'src/services/colorService.ts'
      - 'src/data/color-keywords.json'
      - 'tests/**/*.spec.ts'
  pull_request:
    branches: [ main ]
    paths:
      - 'src/algorithms/**'
      - 'src/services/**'

jobs:
  color-theory-validation:
    name: ğŸ§® Color Theory Mathematical Accuracy
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“‹ Checkout code
        uses: actions/checkout@v4
        
      - name: ğŸ“¦ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
          
      - name: ğŸ”§ Install dependencies
        run: npm ci
        
      - name: ğŸ¯ Test Color Harmony Rules
        run: |
          npm run test -- --testPathPattern="algorithms" --verbose
          echo "âœ… 5ê°€ì§€ ìƒ‰ìƒ ì¡°í™” ê·œì¹™ ìˆ˜í•™ì  ì •í™•ì„± ê²€ì¦ ì™„ë£Œ"
          
      - name: ğŸ“Š Test Korean Keyword Mapping
        run: |
          npm run test -- --testNamePattern="keyword" --coverage
          echo "âœ… í•œêµ­ì–´ í‚¤ì›Œë“œ â†’ ìƒ‰ìƒ ë§¤í•‘ ì •í™•ì„± ê²€ì¦ ì™„ë£Œ"
          
      - name: ğŸ¨ Test HSL/RGB/HEX Conversion
        run: |
          npm run test -- --testNamePattern="color.*conversion" --verbose
          echo "âœ… ìƒ‰ìƒ í˜•ì‹ ë³€í™˜ ì •í™•ì„± ê²€ì¦ ì™„ë£Œ"

  accessibility-compliance:
    name: â™¿ WCAG Accessibility Compliance  
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“‹ Checkout code
        uses: actions/checkout@v4
        
      - name: ğŸ“¦ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
          
      - name: ğŸ”§ Install dependencies
        run: npm ci
        
      - name: ğŸ” Test WCAG Contrast Ratio Calculation
        run: |
          npm run test -- --testNamePattern="wcag|contrast|accessibility" --verbose
          echo "âœ… WCAG AA(4.5:1) / AAA(7:1) ëŒ€ë¹„ìœ¨ ê³„ì‚° ì •í™•ì„± ê²€ì¦"